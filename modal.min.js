/** 
 * Modal.js
 *
 * Simple customizable modals
 * https://github.com/wwilsman/Modal.js
 *
 * @author Wil Wilsman <hello@wilwilsman.com>
 * @version 0.9.0
 * @license MIT License
 */
(function(){var a={},b={extend:function(){var a,b,c,d=arguments[0];for(c=1;c<arguments.length;c++){b=arguments[c];for(a in b)if(b.hasOwnProperty(a))try{d[a]=b[a].constructor==Object?utils.extend(d[a],b[a]):b[a]}catch(e){d[a]=b[a]}}return d},tmpl:function(a,b){var c=new Function("obj","var p=[];with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?c(b):c},parseHtml:function(a){var b=document.createElement("div");return node=null,b.innerHTML=a,node=b.lastChild,b=null,node},noop:function(){}},c=function(e,f){var g;this==window?(void 0!=f&&(g=a[e]),g=g||a[d]||new c,g.content(f||e).insert()):("string"==typeof e?f.name=e:f=e,this.options=void 0!=f&&f.inherits&&(inherit=a[f.inherits])?b.extend({},inherit.options,f):b.extend({},defaultOpts,f),a[this.options.name]=this)},d="default";defaultOpts={name:"default",inherits:null,outerTmpl:'<section class="modal-wrapper modal-<%=name%>"><aside class="modal-body"><%=inner%></aside></section>',innerTmpl:'<p><%=content%></p>',afterInsert:b.noop,beforeDestroy:b.noop},c.prototype={content:function(a){var c=b.tmpl(this.options.innerTmpl,{content:a||""});return this.html=b.tmpl(this.options.outerTmpl,{name:this.options.name,inner:c}),this},insert:function(){this.el=b.parseHtml(this.html),document.body.appendChild(this.el),this.el.addEventListener("click",this,!1),document.addEventListener("keyup",this,!1),this.options.afterInsert.call(this)},destroy:function(){this.el.removeEventListener("click",this,!1),document.removeEventListener("keyup",this,!1),document.body.removeChild(this.el),this.el=null},dismiss:function(){this.options.beforeDestroy.call(this),this.options.beforeDestroy==b.noop&&this.destroy()},handleEvent:function(a){switch(a.type){case"keyup":27==a.keyCode&&this.dismiss();break;case"click":a.target==this.el&&this.dismiss()}}},c.show=function(b){(modal=a[b])&&modal.content().insert()},c.setDefault=function(b){a[b]&&(d=b)},c.defaultOpts=function(a){b.extend(defaultOpts,a)},window.Modal||(window.Modal=c)}());